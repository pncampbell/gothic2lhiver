
func int b_ironmob_bestimmung()
{
	if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_01") && (IRONMOB_01_AMOUNT_MAX > ironmob_01_amount))
	{
		ironmob_01_amount = ironmob_01_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_02") && (IRONMOB_02_AMOUNT_MAX > ironmob_02_amount))
	{
		ironmob_02_amount = ironmob_02_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_03") && (IRONMOB_03_AMOUNT_MAX > ironmob_03_amount))
	{
		ironmob_03_amount = ironmob_03_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_04") && (IRONMOB_04_AMOUNT_MAX > ironmob_04_amount))
	{
		ironmob_04_amount = ironmob_04_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_05") && (IRONMOB_05_AMOUNT_MAX > ironmob_05_amount))
	{
		ironmob_05_amount = ironmob_05_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_06") && (IRONMOB_06_AMOUNT_MAX > ironmob_06_amount))
	{
		ironmob_06_amount = ironmob_06_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_07") && (IRONMOB_07_AMOUNT_MAX > ironmob_07_amount))
	{
		ironmob_07_amount = ironmob_07_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_08") && (IRONMOB_08_AMOUNT_MAX > ironmob_08_amount))
	{
		ironmob_08_amount = ironmob_08_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_09") && (IRONMOB_09_AMOUNT_MAX > ironmob_09_amount))
	{
		ironmob_09_amount = ironmob_09_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_10") && (IRONMOB_10_AMOUNT_MAX > ironmob_10_amount))
	{
		ironmob_10_amount = ironmob_10_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_11") && (IRONMOB_11_AMOUNT_MAX > ironmob_11_amount))
	{
		ironmob_11_amount = ironmob_11_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_12") && (IRONMOB_12_AMOUNT_MAX > ironmob_12_amount))
	{
		ironmob_12_amount = ironmob_12_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_13") && (IRONMOB_13_AMOUNT_MAX > ironmob_13_amount))
	{
		ironmob_13_amount = ironmob_13_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_14") && (IRONMOB_14_AMOUNT_MAX > ironmob_14_amount))
	{
		ironmob_14_amount = ironmob_14_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_15") && (IRONMOB_15_AMOUNT_MAX > ironmob_15_amount))
	{
		ironmob_15_amount = ironmob_15_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_16") && (IRONMOB_16_AMOUNT_MAX > ironmob_16_amount))
	{
		ironmob_16_amount = ironmob_16_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_17") && (IRONMOB_17_AMOUNT_MAX > ironmob_17_amount))
	{
		ironmob_17_amount = ironmob_17_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_18") && (IRONMOB_18_AMOUNT_MAX > ironmob_18_amount))
	{
		ironmob_18_amount = ironmob_18_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_19") && (IRONMOB_19_AMOUNT_MAX > ironmob_19_amount))
	{
		ironmob_19_amount = ironmob_19_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_20") && (IRONMOB_20_AMOUNT_MAX > ironmob_20_amount))
	{
		ironmob_20_amount = ironmob_20_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_21") && (IRONMOB_21_AMOUNT_MAX > ironmob_21_amount))
	{
		ironmob_21_amount = ironmob_21_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_22") && (IRONMOB_22_AMOUNT_MAX > ironmob_22_amount))
	{
		ironmob_22_amount = ironmob_22_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_23") && (IRONMOB_23_AMOUNT_MAX > ironmob_23_amount))
	{
		ironmob_23_amount = ironmob_23_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_24") && (IRONMOB_24_AMOUNT_MAX > ironmob_24_amount))
	{
		ironmob_24_amount = ironmob_24_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_25") && (IRONMOB_25_AMOUNT_MAX > ironmob_25_amount))
	{
		ironmob_25_amount = ironmob_25_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_26") && (IRONMOB_26_AMOUNT_MAX > ironmob_26_amount))
	{
		ironmob_26_amount = ironmob_26_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_27") && (IRONMOB_27_AMOUNT_MAX > ironmob_27_amount))
	{
		ironmob_27_amount = ironmob_27_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_28") && (IRONMOB_28_AMOUNT_MAX > ironmob_28_amount))
	{
		ironmob_28_amount = ironmob_28_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_29") && (IRONMOB_29_AMOUNT_MAX > ironmob_29_amount))
	{
		ironmob_29_amount = ironmob_29_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_30") && (IRONMOB_30_AMOUNT_MAX > ironmob_30_amount))
	{
		ironmob_30_amount = ironmob_30_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_31") && (IRONMOB_31_AMOUNT_MAX > ironmob_31_amount))
	{
		ironmob_31_amount = ironmob_31_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_32") && (IRONMOB_32_AMOUNT_MAX > ironmob_32_amount))
	{
		ironmob_32_amount = ironmob_32_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_33") && (IRONMOB_33_AMOUNT_MAX > ironmob_33_amount))
	{
		ironmob_33_amount = ironmob_33_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_34") && (IRONMOB_34_AMOUNT_MAX > ironmob_34_amount))
	{
		ironmob_34_amount = ironmob_34_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"NW_NEWWORLD_IRONORE_35") && (IRONMOB_35_AMOUNT_MAX > ironmob_35_amount))
	{
		ironmob_35_amount = ironmob_35_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_01") && (IRONMOB_36_AMOUNT_MAX > ironmob_36_amount))
	{
		ironmob_36_amount = ironmob_36_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_02") && (IRONMOB_37_AMOUNT_MAX > ironmob_37_amount))
	{
		ironmob_37_amount = ironmob_37_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_03") && (IRONMOB_38_AMOUNT_MAX > ironmob_38_amount))
	{
		ironmob_38_amount = ironmob_38_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_04") && (IRONMOB_39_AMOUNT_MAX > ironmob_39_amount))
	{
		ironmob_39_amount = ironmob_39_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_05") && (IRONMOB_40_AMOUNT_MAX > ironmob_40_amount))
	{
		ironmob_40_amount = ironmob_40_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_06") && (IRONMOB_41_AMOUNT_MAX > ironmob_41_amount))
	{
		ironmob_41_amount = ironmob_41_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_07") && (IRONMOB_42_AMOUNT_MAX > ironmob_42_amount))
	{
		ironmob_42_amount = ironmob_42_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_08") && (IRONMOB_43_AMOUNT_MAX > ironmob_43_amount))
	{
		ironmob_43_amount = ironmob_43_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_09") && (IRONMOB_44_AMOUNT_MAX > ironmob_44_amount))
	{
		ironmob_44_amount = ironmob_44_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_10") && (IRONMOB_45_AMOUNT_MAX > ironmob_45_amount))
	{
		ironmob_45_amount = ironmob_45_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_10") && (IRONMOB_46_AMOUNT_MAX > ironmob_46_amount))
	{
		ironmob_46_amount = ironmob_46_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_12") && (IRONMOB_47_AMOUNT_MAX > ironmob_47_amount))
	{
		ironmob_47_amount = ironmob_47_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_13") && (IRONMOB_48_AMOUNT_MAX > ironmob_48_amount))
	{
		ironmob_48_amount = ironmob_48_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_14") && (IRONMOB_49_AMOUNT_MAX > ironmob_49_amount))
	{
		ironmob_49_amount = ironmob_49_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_15") && (IRONMOB_50_AMOUNT_MAX > ironmob_50_amount))
	{
		ironmob_50_amount = ironmob_50_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_16") && (IRONMOB_51_AMOUNT_MAX > ironmob_51_amount))
	{
		ironmob_51_amount = ironmob_51_amount + 1;
		return TRUE;
	}
	else if(Hlp_StrCmp(Npc_GetNearestWP(self),"OW_OLDWORLD_IRONORE_17") && (IRONMOB_52_AMOUNT_MAX > ironmob_52_amount))
	{
		ironmob_52_amount = ironmob_52_amount + 1;
		return TRUE;
	};
	return FALSE;
};

func void ironhacken_s1()
{
	if(Hlp_GetInstanceID(self) == Hlp_GetInstanceID(hero))
	{
		self.aivar[AIV_INVINCIBLE] = TRUE;
		player_mobsi_production = MOBSI_IRONHACKEN;
		AI_ProcessInfos(hero);
	};
};


instance PC_IRONHACKEN_END(C_Info)
{
	npc = PC_Hero;
	nr = 999;
	condition = pc_ironhacken_end_condition;
	information = pc_ironhacken_end_info;
	permanent = TRUE;
	description = Dialog_Ende;
};


func int pc_ironhacken_end_condition()
{
	if(player_mobsi_production == MOBSI_IRONHACKEN)
	{
		return TRUE;
	};
};

func void pc_ironhacken_end_info()
{
	Truemmer_Count = 0;
	b_endproductiondialog();
};


instance PC_IRONHACKEN_ADDON_HOUR(C_Info)
{
	npc = PC_Hero;
	nr = 2;
	condition = pc_ironhacken_addon_hour_condition;
	information = pc_ironhacken_addon_hour_info;
	permanent = TRUE;
	description = "Mine iron ore.";
};


func int pc_ironhacken_addon_hour_condition()
{
	if(player_mobsi_production == MOBSI_IRONHACKEN)
	{
		return TRUE;
	};
};

func void pc_ironhacken_addon_hour_info()
{
	if(b_ironmob_bestimmung() == TRUE)
	{
		if((player_talent_oremaster[0] == FALSE) && (player_talent_oremaster[1] == FALSE) && (player_talent_oremaster[2] == FALSE))
		{
			AI_Wait(hero,5);
			CreateInvItems(hero,itmi_ironnugget_addon,2);
			Print(PRINT_OREPROCESS);
			b_addon_gemshacken();
			AI_PrintScreen("2 lumps of iron ore mined!",-1,52,FONT_SCREENBRIGHTLARGE,2);
			Truemmer_Count = 0;
			b_endproductiondialog();
		}
		else if((player_talent_oremaster[0] == TRUE) && (player_talent_oremaster[1] == FALSE) && (player_talent_oremaster[2] == FALSE))
		{
			AI_Wait(hero,5);
			CreateInvItems(hero,itmi_ironnugget_addon,4);
			Print(PRINT_OREPROCESS);
			b_addon_gemshacken();
			AI_PrintScreen("4 lumps of iron ore mined!",-1,52,FONT_SCREENBRIGHTLARGE,2);
			Truemmer_Count = 0;
			b_endproductiondialog();
		}
		else if((player_talent_oremaster[1] == TRUE) && (player_talent_oremaster[0] == TRUE) && (player_talent_oremaster[2] == FALSE))
		{
			AI_Wait(hero,5);
			CreateInvItems(hero,itmi_ironnugget_addon,6);
			Print(PRINT_OREPROCESS);
			b_addon_gemshacken();
			AI_PrintScreen("6 lumps of iron ore mined!",-1,52,FONT_SCREENBRIGHTLARGE,2);
			Truemmer_Count = 0;
			b_endproductiondialog();
		}
		else if((player_talent_oremaster[2] == TRUE) && (player_talent_oremaster[0] == TRUE) && (player_talent_oremaster[1] == TRUE))
		{
			AI_Wait(hero,5);
			CreateInvItems(hero,itmi_ironnugget_addon,8);
			Print(PRINT_OREPROCESS);
			b_addon_gemshacken();
			AI_PrintScreen("8 lumps of iron ore mined!",-1,52,FONT_SCREENBRIGHTLARGE,2);
			Truemmer_Count = 0;
			b_endproductiondialog();
		};
	}
	else if((Npc_GetDistToWP(hero,"NW_CITY_ISLANDADD_07") <= 700) || (Npc_GetDistToWP(hero,"NW_CITY_SMFOREST_ADD_03") <= 1000) || (Npc_GetDistToWP(hero,"NW_BIGFARM_LAKE_CAVE_03") <= 1200) || (Npc_GetDistToWP(hero,"NW_TROLLAREA_RUINS_CAVE_01") <= 1800) || (Npc_GetDistToWP(hero,"SPAWN_MOLERAT02_SPAWN01") <= 1500))
	{
		AI_PrintScreen("Someone has already been here!",-1,52,FONT_SCREENBRIGHTLARGE,2);
		b_endproductiondialog();
	}
	else
	{
		PrintScreen("There's nothing else to be had here!",-1,-1,FONT_SCREENBRIGHTLARGE,2);
		b_endproductiondialog();
	};
};

